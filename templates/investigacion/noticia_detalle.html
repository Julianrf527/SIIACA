{% extends 'base.html' %}
{% load static %}

{% block title %}{{ noticia.titulo }} | Semillero IA{% endblock %}

{% block content %}
<main class="max-w-[1200px] mx-auto px-4 py-8">
  <div class="flex flex-col lg:flex-row gap-12">

    <article class="lg:w-2/3">
      <div class="mb-6">
        <span class="text-xs font-bold text-primary">{{ noticia.categoria }}</span>
        <h1 class="text-3xl md:text-4xl font-bold mt-3 mb-2">{{ noticia.titulo }}</h1>
        <p class="text-sm text-[#4c9a4c]">{{ noticia.fecha_publicacion|date:"F d, Y" }}</p>
      </div>

      {% if noticia.foto %}
      <div class="mb-6">
        <img src="{{ noticia.foto.url }}" alt="{{ noticia.titulo }}" class="w-full h-48 object-cover rounded-lg" />
      </div>
      {% endif %}

      <div class="prose max-w-none">
        {{ noticia.descripcion|linebreaks }}
      </div>

      {% if noticia.pdf %}
      <div class="mt-6">
        <a href="{{ noticia.pdf.url }}" class="bg-primary text-black px-4 py-2 rounded-lg font-bold">Descargar PDF</a>
      </div>
      {% endif %}
    </article>

    <aside class="lg:w-1/3 space-y-10">
      <div class="bg-white dark:bg-[#152a15] p-6 rounded-2xl border border-[#e7f3e7] dark:border-[#1a331a] shadow-sm">
        <h4 class="text-xl font-bold mb-6 flex items-center gap-2">
          <span class="w-2 h-6 bg-primary rounded-full"></span>
          Noticias Recientes
        </h4>
        <div class="space-y-6">
          {% for n in noticias_recientes %}
          <a class="group flex gap-4" href="{% url 'noticia_detalle' n.pk %}">
            <div class="w-20 h-20 rounded-lg overflow-hidden flex-shrink-0">
              {% if n.foto %}
              <img alt="{{ n.titulo }}" class="w-full h-full object-cover" src="{{ n.foto.url }}" />
              {% endif %}
            </div>
            <div>
              <h5 class="text-sm font-bold leading-tight group-hover:text-primary transition-colors mb-1 line-clamp-2">{{ n.titulo }}</h5>
              <p class="text-[10px] uppercase tracking-widest text-[#4c9a4c]">{{ n.fecha_publicacion|date:"F d, Y" }}</p>
            </div>
          </a>
          {% endfor %}
        </div>
      </div>

      <div class="bg-primary/10 dark:bg-primary/5 p-6 rounded-2xl border-2 border-primary/20">
        <div class="flex items-center gap-3 mb-4 text-primary">
          <span class="material-symbols-outlined text-3xl">mail</span>
          <h3 class="text-lg font-bold text-[#0d1b0d] dark:text-white">Suscr√≠bete</h3>
        </div>
        <p class="text-sm mb-6 opacity-75">Recibe los resultados de nuestras investigaciones mensuales.</p>
        <form method="post" action="{% url 'suscribirse' %}" class="flex flex-col gap-3">
          {% csrf_token %}
          <input name="correo" class="w-full px-4 py-3 rounded-xl border-none ring-1 ring-[#c0e4c0] dark:ring-[#1a331a] bg-white dark:bg-background-dark focus:ring-2 focus:ring-primary text-sm" placeholder="tu.email@unal.edu.co" type="email" required />
          <button class="bg-primary text-[#0d1b0d] font-bold py-3 rounded-xl shadow-lg hover:shadow-primary/20 transition-all flex justify-center items-center gap-2" type="submit">Suscribirme <span class="material-symbols-outlined">send</span></button>
        </form>
      </div>
    </aside>
  </div>
  </div>
</main>
{% endblock %}
